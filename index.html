<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Super Clicker</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #000000;
            --card-bg: #1c1c1e;
            --text-color: #ffffff;
            --coin-gradient: linear-gradient(145deg, #ffd700, #f39c12);
            --energy-color: #e74c3c;
            --accent-color: #3498db;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
        }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .header {
            width: 100%;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
        }

        .stat-box {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #8e8e93;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
        }

        /* –°—á–µ—Ç—á–∏–∫ –º–æ–Ω–µ—Ç */
        .score-display {
            margin-top: 40px;
            font-size: 48px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-display img {
            width: 40px;
            height: 40px;
        }

        /* –ú–æ–Ω–µ—Ç–∞ (–ö–Ω–æ–ø–∫–∞) */
        .coin-container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .coin {
            width: 260px;
            height: 260px;
            background: var(--coin-gradient);
            border-radius: 50%;
            box-shadow: 0 0 50px rgba(243, 156, 18, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.3);
            border: 8px solid #b7791f;
            cursor: pointer;
            transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 100px;
        }

        .coin:active {
            transform: scale(0.95);
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–ª–µ—Ç–∞—é—â–∏—Ö —Ü–∏—Ñ—Ä */
        .floater {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 24px;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            z-index: 20;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1.5); }
        }

        /* –®–∫–∞–ª–∞ —ç–Ω–µ—Ä–≥–∏–∏ */
        .energy-container {
            width: 90%;
            margin-bottom: 20px;
        }

        .energy-text {
            text-align: center;
            margin-bottom: 5px;
            font-size: 14px;
            color: #8e8e93;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #333;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #f1c40f);
            width: 100%;
            transition: width 0.2s;
        }

        /* –ú–µ–Ω—é —É–ª—É—á—à–µ–Ω–∏–π */
        .menu {
            width: 100%;
            background: var(--card-bg);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            padding: 20px;
            box-sizing: border-box;
            max-height: 30vh;
            overflow-y: auto;
        }

        .shop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 10px;
        }

        .shop-info h4 { margin: 0; font-size: 16px; }
        .shop-info p { margin: 4px 0 0; font-size: 12px; color: #888; }

        .buy-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        .buy-btn:disabled {
            background: #444;
            opacity: 0.5;
        }

    </style>
</head>
<body>

    <div class="header">
        <div class="stat-box">
            <div class="stat-label">–ü—Ä–∏–±—ã–ª—å –≤ —Å–µ–∫</div>
            <div class="stat-value" id="perSec">0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">–ó–∞ –∫–ª–∏–∫</div>
            <div class="stat-value" id="perClick">1</div>
        </div>
    </div>

    <div class="score-display">
        <span id="score">0</span>
    </div>

    <div class="coin-container">
        <div class="coin" id="coinBtn">üí∞</div>
    </div>

    <div class="energy-container">
        <div class="energy-text"><span id="energy">500</span> / <span id="maxEnergy">500</span> ‚ö°</div>
        <div class="progress-bar">
            <div class="progress-fill" id="energyBar"></div>
        </div>
    </div>

    <div class="menu">
        <h3>–£–ª—É—á—à–µ–Ω–∏—è</h3>
        <div class="shop-item">
            <div class="shop-info">
                <h4>–ú—É–ª—å—Ç–∏—Ç–∞–ø</h4>
                <p>+1 –∑–∞ –∫–ª–∏–∫</p>
            </div>
            <button class="buy-btn" id="btnUpgradeClick" onclick="buyUpgrade('click')">
                100 üí∞
            </button>
        </div>

        <div class="shop-item">
            <div class="shop-info">
                <h4>–ê–≤—Ç–æ-–±–æ—Ç</h4>
                <p>+1 –º–æ–Ω–µ—Ç–∞ –≤ —Å–µ–∫</p>
            </div>
            <button class="buy-btn" id="btnUpgradeAuto" onclick="buyUpgrade('auto')">
                200 üí∞
            </button>
        </div>

         <div class="shop-item">
            <div class="shop-info">
                <h4>–ë–∞—Ç–∞—Ä–µ–π–∫–∞</h4>
                <p>+500 –º–∞–∫—Å. —ç–Ω–µ—Ä–≥–∏–∏</p>
            </div>
            <button class="buy-btn" id="btnUpgradeEnergy" onclick="buyUpgrade('energy')">
                300 üí∞
            </button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameData = {
            score: 0,
            clickPower: 1,
            autoProfit: 0,
            energy: 500,
            maxEnergy: 500,
            costs: {
                click: 100,
                auto: 200,
                energy: 300
            }
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞
        const saved = localStorage.getItem('superClickerData');
        if (saved) {
            gameData = JSON.parse(saved);
        }

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const scoreEl = document.getElementById('score');
        const energyEl = document.getElementById('energy');
        const maxEnergyEl = document.getElementById('maxEnergy');
        const energyBar = document.getElementById('energyBar');
        const coinBtn = document.getElementById('coinBtn');

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
        function updateUI() {
            scoreEl.innerText = Math.floor(gameData.score).toLocaleString();
            energyEl.innerText = Math.floor(gameData.energy);
            maxEnergyEl.innerText = gameData.maxEnergy;
            document.getElementById('perSec').innerText = gameData.autoProfit;
            document.getElementById('perClick').innerText = gameData.clickPower;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–æ—Å–∫–∏ —ç–Ω–µ—Ä–≥–∏–∏
            const percentage = (gameData.energy / gameData.maxEnergy) * 100;
            energyBar.style.width = percentage + '%';

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –º–∞–≥–∞–∑–∏–Ω–∞
            updateShopBtn('btnUpgradeClick', gameData.costs.click);
            updateShopBtn('btnUpgradeAuto', gameData.costs.auto);
            updateShopBtn('btnUpgradeEnergy', gameData.costs.energy);
        }

        function updateShopBtn(id, cost) {
            const btn = document.getElementById(id);
            btn.innerText = cost + ' üí∞';
            btn.disabled = gameData.score < cost;
        }

        // –ö–ª–∏–∫ –ø–æ –º–æ–Ω–µ—Ç–µ
        coinBtn.addEventListener('pointerdown', (e) => {
            if (gameData.energy >= gameData.clickPower) {
                // –õ–æ–≥–∏–∫–∞
                gameData.score += gameData.clickPower;
                gameData.energy -= gameData.clickPower;

                // –í–∏–±—Ä–∞—Ü–∏—è
                tg.HapticFeedback.impactOccurred('medium');

                // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç (+—Ü–∏—Ñ—Ä–∞)
                showFloatingText(e.clientX, e.clientY, '+' + gameData.clickPower);

                // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–∫–ª–æ–Ω–∞ –º–æ–Ω–µ—Ç—ã
                const rect = coinBtn.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                coinBtn.style.transform = `perspective(1000px) rotateX(${-y / 10}deg) rotateY(${x / 10}deg) scale(0.95)`;
                setTimeout(() => {
                    coinBtn.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
                }, 100);

                updateUI();
            } else {
                tg.HapticFeedback.notificationOccurred('error');
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–∞—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞
        function showFloatingText(x, y, text) {
            const el = document.createElement('div');
            el.className = 'floater';
            el.innerText = text;
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π
        window.buyUpgrade = function(type) {
            const cost = gameData.costs[type];
            if (gameData.score >= cost) {
                gameData.score -= cost;

                if (type === 'click') {
                    gameData.clickPower += 1;
                    gameData.costs.click = Math.floor(cost * 1.5);
                } else if (type === 'auto') {
                    gameData.autoProfit += 1;
                    gameData.costs.auto = Math.floor(cost * 1.4);
                } else if (type === 'energy') {
                    gameData.maxEnergy += 500;
                    gameData.energy = gameData.maxEnergy; // –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
                    gameData.costs.energy = Math.floor(cost * 1.3);
                }

                tg.HapticFeedback.notificationOccurred('success');
                updateUI();
                saveGame();
            }
        };

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)
        setInterval(() => {
            // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥
            if (gameData.autoProfit > 0) {
                gameData.score += gameData.autoProfit;
            }

            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
            if (gameData.energy < gameData.maxEnergy) {
                gameData.energy = Math.min(gameData.energy + 3, gameData.maxEnergy);
            }

            updateUI();
            saveGame();
        }, 1000);

        function saveGame() {
            localStorage.setItem('superClickerData', JSON.stringify(gameData));
        }

        // –°—Ç–∞—Ä—Ç
        updateUI();
    </script>
</body>
</html>